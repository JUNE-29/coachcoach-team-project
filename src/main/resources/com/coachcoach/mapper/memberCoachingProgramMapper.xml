<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.coachcoach.dao.MemberCoachingProgramDao">

  <resultMap type="MemberCoachingProgram" id="MemberCoachingProgramMap">
    <id column="member_program_no"  property="no"/>
    <result column="member_no"       property="memberNo"/>
    <result column="program_no"       property="programNo"/>
    <result column="remark"  property="remark"/>
    <result column="status"    property="status"/>
    <result column="request_date" property="requestDate"/>
    <result column="pay_date" property="payDate"/>
    <result column="start_date" property="startDate"/>
    <result column="end_date" property="endDate"/>
    <result column="star_rate" property="starRate"/>
    <result column="review" property="review"/>
    <result column="review_date" property="reviewDate"/>
    <result column="etc" property="etc"/>
    
  </resultMap>


  <select id="findByProgramNo" resultMap="MemberCoachingProgramMap" parameterType="int">
     select  
       member_program_no,
       member_no,       
       mcp.program_no,        
       remark,            
       status,            
       request_date,      
       pay_date,          
       start_date,        
       end_date,          
       star_rate,         
       review,            
       review_date,       
       etc               
    from 
      member_coaching_programs mcp 
      join coaching_programs c on mcp.program_no=c.program_no
        where 
      mcp.program_no=#{no}
  </select>
 
  <insert id="insert" parameterType="MemberCoachingProgram"
  useGeneratedKeys="true" keyColumn="member_program_no" keyProperty="no">
    insert into member_coaching_programs(
      member_no,
      program_no,
      remark,
      status,
      request_date,
      start_date,
      end_date
    ) 
    values(
      #{memberNo},
      #{programNo},
      #{remark},
      #{status},
      now(),
      #{startDate},
      #{endDate}
    )
  </insert>
 
 <select id="findByNo" resultMap="MemberCoachingProgramMap" parameterType="int">
     select  
       member_program_no,
       member_no,       
       program_no,        
       remark,            
       status,            
       request_date,      
       pay_date,          
       start_date,        
       end_date,          
       star_rate,         
       review,            
       review_date,       
       etc               
     from 
      member_coaching_programs
        where 
      member_program_no=#{no}
  </select>
 
 
 
</mapper>







